<table cellpadding="0" style="width:100%; border: 2px solid #<!--[$colors[7]]-->; background-color:#<!--[$colors[4]]-->">
	<!--[* Puts the month name and the navigator *]-->
	<tr>
		<td align="center" bgcolor="#<!--[$colors[0]]-->" colspan="7">
			<a href="javascript:calendarBlockMonth(<!--[$previous_month]-->,<!--[$year]-->)">
				<!--[pnimg modname='iw_agendas' src='mesmenys.gif' set='pnimages'   __alt="Previous month" __title="Previous month"]-->
			</a>
			<a href="<!--[pnmodurl modname="iw_agendas" type="user" func="main" mes="$month" any="$year"]-->" style="color:#<!--[$colors[1]]-->">
				<strong><!--[$month_name]-->&nbsp;<!--[$year]--></strong>
			</a>
			<a href="javascript:calendarBlockMonth(<!--[$next_month]-->,<!--[$year]-->)">
				<!--[pnimg modname='iw_agendas' src='mesmes.gif' set='pnimages'   __alt="Next month" __title="Next month"]-->
			</a>
		</td>
	</tr>
	<!--[* Puts the name of the days of the week abbreviated *]-->
	<tr>
	<!--[section name=day_name loop=$day_names_abbr]--> <!-- Header with the name of the day abbreviated -->
		<td style="color:#<!--[$colors[3]]-->; background:#<!--[$colors[2]]-->; text-align:center;"><!--[$day_names_abbr[day_name]]--></td>
	<!--[/section]-->
	</tr>
	<!--[* Builds the calendar *]-->
	<tr>
	<!--[foreach from=$days key=k_day item=v_day name=day_loop]--> <!--[* One iteration per day *]-->
		<!--[if $smarty.foreach.day_loop.iteration <= $days_month]--> <!--[* In fact there's one iteration per array element, so this puts a limit *]-->
	
			<!--[if $smarty.foreach.day_loop.iteration == 1]--> <!--[* Puts empty cells *]-->
				<!--[section name=empty_days loop=$first_day start=1]--><td style="width:14.27%; text-align:center;">&nbsp;</td><!--[/section]--> 
			<!--[/if]-->
	
			<!--[if ($first_day + $smarty.foreach.day_loop.iteration - 2) is div by 7]--> <!--[* Change of row *]-->
				</tr><tr>
			<!--[/if]-->
	
			<!--[if isset($v_day.info)]--> <!--[* Show icon information if present. Implies full change of the cell *]-->
				<td style="width:14.27%; background:#<!--[$v_day.bgcolor]-->; text-align:center;" onmouseout="nd();" onmouseover="overlib('<!--[$v_day.label]--><!--[$v_day.content]--><br /><img src=\'modules/iw_agendas/pnimages/info.gif\' width=\'14\' height=\'14\' alt=\'info\' />&nbsp;<!--[$v_day.info]-->', CAPTION, '<!--[$v_day.caption]-->', BGCOLOR, '#316ac5', TIMEOUT, 100000, DELAY, 200, WIDTH, 200)">
					<span style="color:#<!--[$v_day.color]-->;"><a href="<!--[pnmodurl modname="iw_agendas" type="user" func="main" mes=$month any=$year daid=0 dia=$smarty.foreach.day_loop.iteration]-->"><!--[$smarty.foreach.day_loop.iteration]--><!--[if $v_day.haveContent]-->*<!--[/if]--></a></span>
					<br /><!--[pnimg modname='iw_agendas' src='info.gif' set='pnimages']-->
				</td>
			<!--[else]-->
				<td style="width:14.27%; background:#<!--[$v_day.bgcolor]-->; text-align:center;" onmouseout="nd();" onmouseover="overlib('<!--[$v_day.label]--><!--[$v_day.content]-->', CAPTION, '<!--[$v_day.caption]-->', BGCOLOR, '#316ac5', TIMEOUT, 100000, DELAY, 200, WIDTH, 200)">
					<span style="color:#<!--[$v_day.color]-->;"><a href="<!--[pnmodurl modname="iw_agendas" type="user" func="main" mes=$month any=$year daid=0 dia=$smarty.foreach.day_loop.iteration]-->"><!--[$smarty.foreach.day_loop.iteration]--><!--[if $v_day.haveContent]-->*<!--[/if]--></a></span>
				</td>
			<!--[/if]-->
		<!--[/if]-->
	<!--[/foreach]-->
	</tr>
</table>